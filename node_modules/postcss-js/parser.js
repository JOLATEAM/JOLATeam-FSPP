<<<<<<< HEAD
let postcss = require('postcss')

let IMPORTANT = /\s*!important\s*$/i

let UNITLESS = {
=======
var postcss = require('postcss')

var IMPORTANT = /\s*!important\s*$/i

var unitless = {
>>>>>>> d64897a83ee05dfaaf4e857f6a92bd00c77921de
  'box-flex': true,
  'box-flex-group': true,
  'column-count': true,
  'flex': true,
  'flex-grow': true,
  'flex-positive': true,
  'flex-shrink': true,
  'flex-negative': true,
  'font-weight': true,
  'line-clamp': true,
  'line-height': true,
  'opacity': true,
  'order': true,
  'orphans': true,
  'tab-size': true,
  'widows': true,
  'z-index': true,
  'zoom': true,
  'fill-opacity': true,
  'stroke-dashoffset': true,
  'stroke-opacity': true,
  'stroke-width': true
}

<<<<<<< HEAD
function dashify(str) {
=======
function dashify (str) {
>>>>>>> d64897a83ee05dfaaf4e857f6a92bd00c77921de
  return str
    .replace(/([A-Z])/g, '-$1')
    .replace(/^ms-/, '-ms-')
    .toLowerCase()
}

<<<<<<< HEAD
function decl(parent, name, value) {
  if (value === false || value === null) return

  if (!name.startsWith('--')) {
    name = dashify(name)
  }

  if (typeof value === 'number') {
    if (value === 0 || UNITLESS[name]) {
=======
function decl (parent, name, value) {
  if (value === false || value === null) return

  name = dashify(name)
  if (typeof value === 'number') {
    if (value === 0 || unitless[name]) {
>>>>>>> d64897a83ee05dfaaf4e857f6a92bd00c77921de
      value = value.toString()
    } else {
      value += 'px'
    }
  }

  if (name === 'css-float') name = 'float'

  if (IMPORTANT.test(value)) {
    value = value.replace(IMPORTANT, '')
<<<<<<< HEAD
    parent.push(postcss.decl({ prop: name, value, important: true }))
  } else {
    parent.push(postcss.decl({ prop: name, value }))
  }
}

function atRule(parent, parts, value) {
  let node = postcss.atRule({ name: parts[1], params: parts[3] || '' })
=======
    parent.push(postcss.decl({ prop: name, value: value, important: true }))
  } else {
    parent.push(postcss.decl({ prop: name, value: value }))
  }
}

function atRule (parent, parts, value) {
  var node = postcss.atRule({ name: parts[1], params: parts[3] || '' })
>>>>>>> d64897a83ee05dfaaf4e857f6a92bd00c77921de
  if (typeof value === 'object') {
    node.nodes = []
    parse(value, node)
  }
  parent.push(node)
}

<<<<<<< HEAD
function parse(obj, parent) {
  let name, value, node
  for (name in obj) {
    value = obj[name]
    if (value === null || typeof value === 'undefined') {
      continue
    } else if (name[0] === '@') {
      let parts = name.match(/@(\S+)(\s+([\W\w]*)\s*)?/)
      if (Array.isArray(value)) {
        for (let i of value) {
          atRule(parent, parts, i)
        }
      } else {
        atRule(parent, parts, value)
      }
    } else if (Array.isArray(value)) {
      for (let i of value) {
        decl(parent, name, i)
      }
    } else if (typeof value === 'object') {
      node = postcss.rule({ selector: name })
      parse(value, node)
      parent.push(node)
    } else {
      decl(parent, name, value)
=======
function parse (obj, parent) {
  var name, value, node, i
  for (name in obj) {
    if (obj.hasOwnProperty(name)) {
      value = obj[name]
      if (value === null || typeof value === 'undefined') {
        continue
      } else if (name[0] === '@') {
        var parts = name.match(/@([^\s]+)(\s+([\w\W]*)\s*)?/)
        if (Array.isArray(value)) {
          for (i = 0; i < value.length; i++) {
            atRule(parent, parts, value[i])
          }
        } else {
          atRule(parent, parts, value)
        }
      } else if (Array.isArray(value)) {
        for (i = 0; i < value.length; i++) {
          decl(parent, name, value[i])
        }
      } else if (typeof value === 'object') {
        node = postcss.rule({ selector: name })
        parse(value, node)
        parent.push(node)
      } else {
        decl(parent, name, value)
      }
>>>>>>> d64897a83ee05dfaaf4e857f6a92bd00c77921de
    }
  }
}

module.exports = function (obj) {
<<<<<<< HEAD
  let root = postcss.root()
=======
  var root = postcss.root()
>>>>>>> d64897a83ee05dfaaf4e857f6a92bd00c77921de
  parse(obj, root)
  return root
}
